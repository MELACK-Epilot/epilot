# ğŸ” COMMENT VOIR LES GRAPHIQUES SUR LA PAGE FINANCES

**Date** : 6 novembre 2025

---

## âœ… MODIFICATIONS APPLIQUÃ‰ES

Les graphiques ont Ã©tÃ© ajoutÃ©s Ã  la page Finances :
1. âœ… Graphique Ã‰volution Revenus (12 mois)
2. âœ… Graphique RÃ©partition par Plan (Donut)

---

## ğŸ”„ POUR VOIR LES MODIFICATIONS

### **MÃ©thode 1 : RafraÃ®chir le Navigateur** (RecommandÃ©)

1. Ouvrir votre navigateur
2. Aller sur : `http://localhost:5173/dashboard/finances`
3. Appuyer sur **`F5`** ou **`Ctrl + R`**
4. Ou faire un **hard refresh** : **`Ctrl + Shift + R`**

### **MÃ©thode 2 : RedÃ©marrer le Serveur**

1. Dans le terminal, arrÃªter le serveur : **`Ctrl + C`**
2. RedÃ©marrer : `npm run dev`
3. RafraÃ®chir le navigateur

---

## ğŸ“Š CE QUE VOUS DEVRIEZ VOIR

### **Page Finances ComplÃ¨te** :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Finances                                  â”‚
â”‚ Vue d'ensemble de la santÃ© financiÃ¨re       â”‚
â”‚ [PÃ©riode â–¼] [Exporter â–¼]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ KPIs PRINCIPAUX (4 cards)                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚Groupesâ”‚ â”‚Abontsâ”‚ â”‚Plans â”‚ â”‚Revenusâ”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ˆ MÃ©triques AvancÃ©es (4 cards)            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ ARPU â”‚ â”‚Convertâ”‚ â”‚ Churnâ”‚ â”‚ LTV  â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚ â„¹ï¸ Explications des mÃ©triques              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š GRAPHIQUES (2 colonnes)    â† NOUVEAU    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ˆ Ã‰volution     â”‚ â”‚ ğŸ“¦ RÃ©partition   â”‚ â”‚
â”‚ â”‚    Revenus       â”‚ â”‚    par Plan      â”‚ â”‚
â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚
â”‚ â”‚ [Graphique Ligne]â”‚ â”‚ [Graphique Donut]â”‚ â”‚
â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚
â”‚ â”‚ 12 derniers mois â”‚ â”‚ Abonnements actifsâ”‚ â”‚
â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚
â”‚ â”‚ Total | Moyenne  â”‚ â”‚ Liste des plans  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš ï¸ Alertes financiÃ¨res (si applicable)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸš€ AccÃ¨s Rapide (4 cards)                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚Plans â”‚ â”‚Abontsâ”‚ â”‚Paiemtâ”‚ â”‚DÃ©pensâ”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ DÃ‰TAILS DES GRAPHIQUES

### **Graphique 1 : Ã‰volution Revenus** ğŸ“ˆ

**Position** : Colonne gauche, aprÃ¨s les KPIs avancÃ©s

**Contenu** :
- Titre : "Ã‰volution des Revenus"
- Sous-titre : "12 derniers mois"
- Graphique ligne turquoise
- Statistiques en haut Ã  droite :
  - Revenu du dernier mois
  - Croissance vs mois prÃ©cÃ©dent (%)
- Statistiques en bas :
  - Revenu Total
  - Moyenne Mensuelle
  - Dernier Mois

**InteractivitÃ©** :
- Hover sur les points â†’ Tooltip avec dÃ©tails
- Responsive : Passe en colonne sur mobile

---

### **Graphique 2 : RÃ©partition par Plan** ğŸ“Š

**Position** : Colonne droite, Ã  cÃ´tÃ© du graphique revenus

**Contenu** :
- Titre : "RÃ©partition par Plan"
- Sous-titre : "Abonnements actifs"
- Graphique donut avec couleurs :
  - Gratuit : Gris (#6B7280)
  - Premium : Turquoise (#2A9D8F)
  - Pro : Bleu foncÃ© (#1D3557)
  - Institutionnel : Jaune/Or (#E9C46A)
- Pourcentages sur le graphique
- Liste dÃ©taillÃ©e en bas :
  - Nom du plan
  - Nombre d'abonnements (%)
  - Revenus gÃ©nÃ©rÃ©s
  - % des revenus
- RÃ©sumÃ© total en bas (fond gris)

**InteractivitÃ©** :
- Hover sur les parts â†’ Tooltip avec dÃ©tails
- LÃ©gende interactive
- Responsive : Passe en colonne sur mobile

---

## ğŸ” DÃ‰PANNAGE

### **ProblÃ¨me 1 : Les graphiques ne s'affichent pas**

**Solutions** :
1. Vider le cache du navigateur : `Ctrl + Shift + Delete`
2. Hard refresh : `Ctrl + Shift + R`
3. RedÃ©marrer le serveur de dÃ©veloppement
4. VÃ©rifier la console (F12) pour les erreurs

### **ProblÃ¨me 2 : Erreur "recharts is not defined"**

**Solution** :
```bash
npm install recharts
npm run dev
```

### **ProblÃ¨me 3 : Erreur "date-fns is not defined"**

**Solution** :
```bash
npm install date-fns
npm run dev
```

### **ProblÃ¨me 4 : Les graphiques sont vides**

**Raisons possibles** :
- Pas de donnÃ©es dans la base de donnÃ©es
- VÃ©rifier qu'il y a des paiements dans la table `payments`
- VÃ©rifier qu'il y a des abonnements actifs dans `subscriptions`

**VÃ©rification SQL** :
```sql
-- VÃ©rifier les paiements
SELECT COUNT(*) FROM payments WHERE status = 'completed';

-- VÃ©rifier les abonnements
SELECT COUNT(*) FROM subscriptions WHERE status = 'active';
```

### **ProblÃ¨me 5 : Erreur TypeScript**

**Solution** :
```bash
npm run type-check
```

Si des erreurs apparaissent, elles seront listÃ©es et pourront Ãªtre corrigÃ©es.

---

## ğŸ“± RESPONSIVE

Les graphiques s'adaptent automatiquement :

**Desktop (â‰¥1024px)** :
- 2 colonnes cÃ´te Ã  cÃ´te

**Tablet (768px - 1023px)** :
- 2 colonnes cÃ´te Ã  cÃ´te (plus Ã©troites)

**Mobile (<768px)** :
- 1 colonne (graphiques empilÃ©s)

---

## ğŸ¨ PERSONNALISATION

### **Changer la PÃ©riode du Graphique Revenus** :

Dans `FinancesDashboard.tsx` ligne 40 :
```typescript
const { data: revenueData } = useRevenueChart(6); // 6 mois au lieu de 12
```

### **Changer les Couleurs des Plans** :

Dans `usePlanDistribution.ts` ligne 18 :
```typescript
const PLAN_COLORS = {
  gratuit: '#VOTRE_COULEUR',
  premium: '#VOTRE_COULEUR',
  pro: '#VOTRE_COULEUR',
  institutionnel: '#VOTRE_COULEUR',
};
```

---

## âœ… CHECKLIST DE VÃ‰RIFICATION

- [ ] Le serveur de dÃ©veloppement est dÃ©marrÃ© (`npm run dev`)
- [ ] Le navigateur est ouvert sur `http://localhost:5173`
- [ ] La page `/dashboard/finances` est chargÃ©e
- [ ] Le cache du navigateur est vidÃ©
- [ ] La page est rafraÃ®chie (F5)
- [ ] Les 4 KPIs principaux s'affichent
- [ ] Les 4 KPIs avancÃ©s s'affichent
- [ ] Le graphique Ã‰volution Revenus s'affiche
- [ ] Le graphique RÃ©partition par Plan s'affiche
- [ ] Les tooltips fonctionnent au hover
- [ ] Le responsive fonctionne (tester en rÃ©duisant la largeur)

---

## ğŸ“ SUPPORT

Si les graphiques ne s'affichent toujours pas aprÃ¨s avoir suivi toutes ces Ã©tapes :

1. VÃ©rifier la console du navigateur (F12)
2. Copier les erreurs
3. VÃ©rifier les fichiers crÃ©Ã©s :
   - `src/features/dashboard/hooks/useRevenueChart.ts`
   - `src/features/dashboard/hooks/usePlanDistribution.ts`
   - `src/features/dashboard/components/finance/RevenueChart.tsx`
   - `src/features/dashboard/components/finance/PlanDistributionChart.tsx`

---

**Les graphiques sont lÃ , il suffit de rafraÃ®chir !** ğŸ‰
